import{u as O,f as Z,g as ee,h as U,i as te,P as ae,t as ie,j as re,k as S,l as q,m as le,n as Y,p as a,q as se,R as P,s as ne,v as ue,x as oe,y as T,z as $,C as ce,A as de,B as me,D as he,E as pe,F as ge,G as ve,H as ye,I as Ee,J as be,K as k}from"./app-DbRsw7jK.js";const we=["/","/chatgpt.html","/liuyanban.html","/slides.html","/about-this-website/","/about-this-website/vuepress-auto-release.html","/about-this-website/vuepress-comment-tutorial.html","/about-this-website/vuepress-release.html","/about-this-website/vuepress-tutorial.html","/articles/","/articles/design-pattern/","/articles/design-pattern/abstract-factory-pattern.html","/articles/design-pattern/adapter-pattern.html","/articles/design-pattern/bridge-pattern.html","/articles/design-pattern/builder-pattern.html","/articles/design-pattern/chain-of-responsibility-pattern.html","/articles/design-pattern/command-pattern.html","/articles/design-pattern/composite-pattern.html","/articles/design-pattern/decorator-pattern.html","/articles/design-pattern/facade-pattern.html","/articles/design-pattern/factory-pattern.html","/articles/design-pattern/flyweight-pattern.html","/articles/design-pattern/interpreter-pattern.html","/articles/design-pattern/iterator-pattern.html","/articles/design-pattern/mediator-pattern.html","/articles/design-pattern/memento-pattern.html","/articles/design-pattern/observer-pattern.html","/articles/design-pattern/prototype-pattern.html","/articles/design-pattern/proxy-pattern.html","/articles/design-pattern/singleton-pattern.html","/articles/design-pattern/state-pattern.html","/articles/design-pattern/strategy-pattern.html","/articles/design-pattern/template-method-pattern.html","/articles/design-pattern/visitor-pattern.html","/articles/distributed-middleware/","/articles/elsa-workflow/Introduction.html","/articles/elsa-workflow/","/articles/houduan/","/articles/houduan/cascade-data-management.html","/articles/houduan/fanshediaoyongfangfa.html","/articles/linux/","/articles/linux/boot-up-script.html","/articles/linux/installation-dotnet.html","/articles/linux/installation-git.html","/articles/linux/installation-nginx.html","/articles/linux/installation-node.html","/articles/linux/installation-yarn.html","/articles/maui/","/articles/maui/changyongkongjian.html","/articles/maui/jinjie.html","/articles/maui/kuozhan.html","/articles/maui/maui-blazorwebview-hunhekaifa.html","/articles/maui/maui-web-hunhekaifa-fanganfenxi.html","/articles/maui/maui-webview-hunhekaifa.html","/articles/maui/rumen.html","/articles/maui/shizhan.html","/articles/maui/xaml-jichu.html","/articles/micro-service/","/articles/micro-service/jian-yi-wei-fu-wu-da-jian.html","/articles/others/","/articles/others/domain-name-add-ssl-certificate.html","/articles/qianduan/","/articles/qianduan/swagger-typescript-api.html","/articles/tools/","/articles/tools/vs-translate.html","/articles/distributed-middleware/authorization_authentication/","/articles/distributed-middleware/authorization_authentication/oauth2.0_openid_connect.html","/articles/distributed-middleware/authorization_authentication/openiddict.html","/articles/distributed-middleware/cicd/","/articles/distributed-middleware/cicd/jenkins.html","/articles/distributed-middleware/elasticsearch/","/articles/distributed-middleware/opentelemetry/","/articles/distributed-middleware/rabbitmq/","/articles/distributed-middleware/rabbitmq/dead-letter-queue.html","/articles/distributed-middleware/rabbitmq/publish-subscribe-mode.html","/articles/distributed-middleware/rabbitmq/publisher-confirms-model%20copy.html","/articles/distributed-middleware/rabbitmq/rabbitmq-kuozhan.html","/articles/distributed-middleware/rabbitmq/routing-mode.html","/articles/distributed-middleware/rabbitmq/rpc-mode.html","/articles/distributed-middleware/rabbitmq/simple-mode.html","/articles/distributed-middleware/rabbitmq/topic-mode.html","/articles/distributed-middleware/rabbitmq/work-queue-mode.html","/articles/distributed-middleware/redis/FreeRedis.html","/articles/distributed-middleware/redis/","/articles/distributed-middleware/opentelemetry/collector/","/articles/distributed-middleware/opentelemetry/collector/deployment.html","/articles/distributed-middleware/opentelemetry/collector/install-the-collector.html","/articles/distributed-middleware/opentelemetry/collector/quick-start.html","/404.html","/category/","/category/vuepress/","/category/linux/","/category/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","/category/elsa/","/category/%E5%85%B6%E5%AE%83/","/category/%E5%90%8E%E7%AB%AF/","/category/.net/","/category/git/","/category/nginx/","/category/node/","/category/npm/","/category/yarn/","/category/maui/","/category/%E5%BE%AE%E6%9C%8D%E5%8A%A1/","/category/ssl/","/category/%E5%89%8D%E7%AB%AF/","/category/%E5%B7%A5%E5%85%B7/","/category/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%AD%E9%97%B4%E4%BB%B6/","/tag/","/tag/vuepress/","/tag/%E8%AF%84%E8%AE%BA/","/tag/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/","/tag/%E8%87%AA%E5%8A%A8%E5%8F%91%E5%B8%83/","/tag/linux/","/tag/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","/tag/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/","/tag/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/","/tag/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/","/tag/elsa/","/tag/workflow/","/tag/%E5%B7%A5%E4%BD%9C%E6%B5%81/","/tag/%E5%85%B6%E5%AE%83/","/tag/.net/","/tag/c_/","/tag/shell%E8%84%9A%E6%9C%AC/","/tag/git/","/tag/nginx/","/tag/node/","/tag/npm/","/tag/yarn/","/tag/maui/","/tag/vue/","/tag/blazor/","/tag/web/","/tag/xaml/","/tag/consul/","/tag/ocelot/","/tag/%E5%9F%9F%E5%90%8D/","/tag/ssl/","/tag/%E5%B7%A5%E5%85%B7/","/tag/%E8%AE%A4%E8%AF%81%E5%92%8C%E6%8E%88%E6%9D%83/","/tag/rabbitmq/","/article/","/star/","/timeline/"],Ae="SEARCH_PRO_QUERY_HISTORY",y=O(Ae,[]),fe=()=>{const{queryHistoryCount:i}=k,r=i>0;return{enabled:r,queryHistory:y,addQueryHistory:l=>{r&&(y.value=Array.from(new Set([l,...y.value.slice(0,i-1)])))},removeQueryHistory:l=>{y.value=[...y.value.slice(0,l),...y.value.slice(l+1)]}}},j=i=>we[i.id]+("anchor"in i?`#${i.anchor}`:""),Be="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:I}=k,E=O(Be,[]),qe=()=>{const i=I>0;return{enabled:i,resultHistory:E,addResultHistory:r=>{if(i){const l={link:j(r),display:r.display};"header"in r&&(l.header=r.header),E.value=[l,...E.value.slice(0,I-1)]}},removeResultHistory:r=>{E.value=[...E.value.slice(0,r),...E.value.slice(r+1)]}}},ke=i=>{const r=ce(),l=U(),x=de(),n=S(0),A=q(()=>n.value>0),p=me([]);return he(()=>{const{search:g,terminate:H}=pe(),b=be(c=>{const w=c.join(" "),{searchFilter:C=h=>h,splitWord:R,suggestionsFilter:_,...v}=r.value;w?(n.value+=1,g(c.join(" "),l.value,v).then(h=>C(h,w,l.value,x.value)).then(h=>{n.value-=1,p.value=h}).catch(h=>{console.warn(h),n.value-=1,n.value||(p.value=[])})):p.value=[]},k.searchDelay-k.suggestDelay);Y([i,l],([c])=>b(c),{immediate:!0}),ge(()=>{H()})}),{isSearching:A,results:p}};var He=Z({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(i,{emit:r}){const l=ee(),x=U(),n=te(ae),{enabled:A,addQueryHistory:p,queryHistory:g,removeQueryHistory:H}=fe(),{enabled:b,resultHistory:c,addResultHistory:w,removeResultHistory:C}=qe(),R=A||b,_=ie(i,"queries"),{results:v,isSearching:h}=ke(_),s=re({isQuery:!0,index:0}),d=S(0),m=S(0),z=q(()=>R&&(g.value.length>0||c.value.length>0)),F=q(()=>v.value.length>0),Q=q(()=>v.value[d.value]||null),M=()=>{const{isQuery:e,index:t}=s;t===0?(s.isQuery=!e,s.index=e?c.value.length-1:g.value.length-1):s.index=t-1},G=()=>{const{isQuery:e,index:t}=s;t===(e?g.value.length-1:c.value.length-1)?(s.isQuery=!e,s.index=0):s.index=t+1},J=()=>{d.value=d.value>0?d.value-1:v.value.length-1,m.value=Q.value.contents.length-1},K=()=>{d.value=d.value<v.value.length-1?d.value+1:0,m.value=0},V=()=>{m.value<Q.value.contents.length-1?m.value+=1:K()},N=()=>{m.value>0?m.value-=1:J()},D=e=>e.map(t=>ve(t)?t:a(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=ye[e.index]||"$content",[u,B=""]=Ee(t)?t[x.value].split("$content"):t.split("$content");return e.display.map(o=>a("div",D([u,...o,B])))}return e.display.map(t=>a("div",D(t)))},f=()=>{d.value=0,m.value=0,r("updateQuery",""),r("close")};return le("keydown",e=>{if(i.isFocusing){if(F.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const t=Q.value.contents[m.value];p(i.queries.join(" ")),w(t),l.push(j(t)),f()}}else if(b){if(e.key==="ArrowUp")M();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:t}=s;s.isQuery?(r("updateQuery",g.value[t]),e.preventDefault()):(l.push(c.value[t].link),f())}}}}),Y([d,m],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>a("div",{class:["search-pro-result-wrapper",{empty:i.queries.length?!F.value:!z.value}],id:"search-pro-results"},i.queries.length?h.value?a(se,{hint:n.value.searching}):F.value?a("ul",{class:"search-pro-result-list"},v.value.map(({title:e,contents:t},u)=>{const B=d.value===u;return a("li",{class:["search-pro-result-list-item",{active:B}]},[a("div",{class:"search-pro-result-title"},e||n.value.defaultTitle),t.map((o,X)=>{const L=B&&m.value===X;return a(P,{to:j(o),class:["search-pro-result-item",{active:L,"aria-selected":L}],onClick:()=>{p(i.queries.join(" ")),w(o),f()}},()=>[o.type==="text"?null:a(o.type==="title"?ne:o.type==="heading"?ue:oe,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[o.type==="text"&&o.header?a("div",{class:"content-header"},o.header):null,a("div",W(o))])])})])})):n.value.emptyResult:R?z.value?[A?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},n.value.queryHistory),g.value.map((e,t)=>a("div",{class:["search-pro-result-item",{active:s.isQuery&&s.index===t}],onClick:()=>{r("updateQuery",e)}},[a(T,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},e),a("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:u=>{u.preventDefault(),u.stopPropagation(),H(t)}})]))])):null,b?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},n.value.resultHistory),c.value.map((e,t)=>a(P,{to:e.link,class:["search-pro-result-item",{active:!s.isQuery&&s.index===t}],onClick:()=>{f()}},()=>[a(T,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[e.header?a("div",{class:"content-header"},e.header):null,a("div",e.display.map(u=>D(u)).flat())]),a("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:u=>{u.preventDefault(),u.stopPropagation(),C(t)}})]))])):null]:n.value.emptyHistory:n.value.emptyResult)}});export{He as default};
